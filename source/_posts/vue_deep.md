---
title: Vue深入学习
date: 2020-04-12 14:53:27
tags: 
  - vue
categories: web前端
---


### 1.浏览器的渲染流程

浏览器加载html的文件时，会先将html文件解析成一个`dom`数，并识别加载`dom`样式，和dom树一起合并渲染。有了渲染树之后，渲染引擎将计算所有元素的位置信息，最后绘制在屏幕上。js引擎和渲染引擎是两个独立的线程，但是js引擎可以触发渲染引擎工作，当我们用js来改变`dom`中元素的外观时，会调用相关的`api`方法操作`dom`对象，会触发渲染引擎回流或者重绘。

- 回流： 当我们对`dom`的修改引发了元素尺寸的变化时，浏览器需要重新计算元素的大小和位置，最后将重新计算的结果绘制出来，这个过程称为回流。

- 重绘： 当我们对`dom`的修改只单纯改变元素的颜色时，浏览器此时并不需要重新计算元素的大小和位置，而只要重新绘制新样式。这个过程称为重绘
- 很显然回流比重绘更加耗费性能，当童通过js修改dom时，会触发渲染引擎的回流或者重绘，对性能的开销是非常大的，所以要尽可能的减少`dom`操作



### 2.Vnode

Vue渲染机制的优化上，引进了`virtual dom`的概念，它是用`Vnode`这个构造函数去描述一个`dom`节点,也就是操作`dom`时会优先操作`virtual dom`这个js对象，最后通过对比，将要改动的部分通知并更新到真实的`dom`中，进而减少渲染引擎绘制的次数，`virtual dom`就是一个中间桥梁


### keep- alive

- 保持组件的状态，避免重复渲染造成的性能损失
- 只需要在动态组件的外面包裹就好

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gdtpzcn8nrj30y40c6mym.jpg)